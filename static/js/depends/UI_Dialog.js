(function(b,a){a.Dialog=function(p){var m=this;m.options=b.extend({uiType:"Dialog",content:null,contentText:"",width:400,height:300,top:"",left:"",titleText:"标题",zIndex:1000,onopen:function(){},onclose:function(){},onbeforeclose:function(){},onupdate:function(){},closeButton:false,modal:false,modalColor:"",modalOpacity:1,modalZIndex:999,resizable:false,draggable:false,ondragstart:function(){},ondrag:function(){},ondragend:function(){}},p);a.BaseUI.call(this);var c=function(){var s={tplDOM:'<div id="#{id}" class="#{class}" style="position:relative">#{title}#{content}#{footer}</div>',tplTitle:'<div id="#{id}" class="#{class}"><span id="#{inner-id}" class="#{inner-class}">#{content}</span></div>',tplContent:'<div id="#{id}" class="#{class}" style="overflow:hidden; position:relative">#{content}</div>',tplFooter:'<div id="#{id}" class="#{class}"></div>'},r="main",v="header",q="header-inner",t="content",u="footer";return a.stringFormat(s.tplDOM,{id:m._getId(r),"class":m._getClass(r),content:a.stringFormat(s.tplDOM,{id:m._getId(),"class":m._getClass(),title:a.stringFormat(s.tplTitle,{id:m._getId(v),"class":m._getClass(v),"inner-id":m._getId(q),"inner-class":m._getClass(q),content:m.options.titleText||""}),content:a.stringFormat(s.tplContent,{id:m._getId(t),"class":m._getClass(t),content:m.options.content?b(m.options.content).html():(m.options.contentText||"")}),footer:a.stringFormat(s.tplFooter,{id:m._getId(u),"class":m._getClass(u)})})})};var e=function(){var q=b("#"+m._getId());if(q.length>0){return q}return null};var n=function(){var r='<div><iframe width="100%" height="97%" frameborder="0" scrolling="no"></iframe></div>',q=m.getMain();b(r).css("position","absolute").css("top","0").css("left","0").css("width",m.options.width).css("height",m.options.height).prependTo(q)};var o=function(){return m.getMain().children().first()};var g=function(){m.options.buttons?(function(){var u=m.options.buttons,t=u.length,s="button",w='<div class="#{class}">#{content}</div>',r="",v=null;for(var q=0;q<t;q++){r=a.stringFormat(w,{"class":m._getClass(s),content:u[q].content});v=b(r);u[q].onclick?v=v.click(u[q].onclick):"";u[q].onmouseup?v=v.mouseup(u[q].onmouseup):"";u[q].onmousedown?v=v.mousedown(u[q].onmousedown):"";u[q].onmouseout?v=v.mouseout(u[q].onmouseout):"";u[q].onmouseover?v=v.mouseover(u[q].onmouseover):"";v.appendTo(m.getFooter())}delete (w);delete (v)})():""};var i=function(){var r=m.getMain();function q(){m.options.top?r.css("top",m.options.top):(function(){r.css("top",(b(document).scrollTop()+(document.documentElement.clientHeight-r.height())/2)+"px")})();m.options.left?r.css("left",m.options.left):(function(){r.css("left",(b(document).scrollLeft()+(document.documentElement.clientWidth-r.width())/2)+"px")})()}q();b(window).resize(function(){q()})};var j=function(q){var r=m.getContent(),t=m.getHeader(),s=m.getFooter();r.css("height",q-t.outerHeight()-s.outerHeight()-parseInt(r.css("padding-top"))-parseInt(r.css("padding-bottom")))};var l=function(){var q=b("#"+m._getId()+"-header-inner");if(q.length>0){return q}return null};var d=function(){if(m.options.closeButton){var r='<div id="#{id}" class="#{class}"></div>',s="close",q=s+"-hover";b(a.stringFormat(r,{id:m._getId(s),"class":m._getClass(s)})).insertAfter(l()).hover(function(t){b(this).addClass(m._getClass(q))},function(t){b(this).removeClass(m._getClass(q))}).click(function(t){m.close()})}};m.open=function(){m.options.onopen();m.getMain().css("margin-left","auto");m.modal?m.modal.show():""};m.close=function(){if(m.options.onbeforeclose()){m.options.onclose()}else{m.options.onclose();m.getMain().css("margin-left","-100000px")}m.modal?m.modal.hide():""};var h=function(){if(m.options.modal){m.modal=new a.Modal({container:document.body,modalColor:m.options.modalColor,modalOpacity:"0.6",modalZIndex:m.options.zIndex-1});m.modal.render();m.modal.show()}};var f=function(){m.options.resizable?(function(){m.getMain().resizable({onResize:function(q){e().css("width",q.data.width).css("height",q.data.height);o().css("width",q.data.width).css("height",q.data.height);j(q.data.height)}})})():""};var k=function(){m.options.draggable?(function(){var q=m.getMain(),s=q.css("top"),r=q.css("left");q.draggable({onDrag:function(t){if(t.target!==m.getHeader()[0]){q.css("top",s).css("left",r)}}})})():""};m.render=function(){if(m.options.target===null||m.getMain()||m.disposed){return null}var q=b(c());q.css("position","absolute").css("zIndex",m.options.zIndex).css("marginLeft","-100000px").appendTo(b(document.body));b(e()).css("width",m.options.width).css("height",m.options.height);n();i();g();j(m.options.height);d();h();f();k()};m.update=function(q){}};a.inherits(a.Dialog,a.BaseUI)})(jQuery,UI);(function(b,a){a.Modal=function(e){var f=this;f.options=b.extend({uiType:"Modal",container:document.body,modalColor:"#000000",modalOpacity:0.6,modalZIndex:999},e);a.BaseUI.call(this);var c=function(){var j='<div id="#{id}" class="#{class}"></div>',i="main";return a.stringFormat(j,{id:f._getId(i),"class":f._getClass(i)})};var d=function(k){var m=b(k),q=b.browser.msie&&b.browser.version<=7?true:false,o=false;if(!m[0]){return}origPos=j();offset={y:q?(origPos.position=="static"?b(m).position().top:b(m).position().top-b(m.parentNode).position().top):m[0].offsetTop,x:q?(origPos.position=="static"?b(m).position().left:b(m).position().left-b(m.parentNode).position().left):m[0].offsetLeft};i();function n(){return{top:offset.y,left:offset.x}}function p(){var r=n();m[0].style.setExpression("left","eval((document.body.scrollLeft || document.documentElement.scrollLeft) + "+r.left+") + 'px'");m[0].style.setExpression("top","eval((document.body.scrollTop || document.documentElement.scrollTop) + "+r.top+") + 'px'")}function j(){var r={position:b(m).css("position"),height:function(){var s=b(m).css("height");return(s!="auto")?(/\d+/.exec(s)[0]):m[0].offsetHeight}(),width:function(){var s=b(m).css("width");return(s!="auto")?(/\d+/.exec(s)[0]):m[0].offsetWidth}()};l("top",r);l("left",r);l("bottom",r);l("right",r);return r}function l(s,t){var r;if(t.position=="static"){t[s]=""}else{r=b(m).css(s);if(r=="auto"||r=="0px"){t[s]=""}else{t[s]=r}}}function i(){if(o){return}b(m).css({top:"",left:"",bottom:"",right:""});if(!q){var r={position:"fixed"};r.top=offset.y+"px";r.left=offset.x+"px";b(m).css(r)}else{b(m).css("position","absolute");p()}o=true}};var h=function(){return b(f.options.container)};var g=function(){var i=f.getMain(),k=document;function j(){if(b.browser.version>7||!b.browser.msie){i.css({width:"100%",height:"100%"})}else{i.css("width",(k.compatMode=="BackCompat"?k.body.clientWidth:k.documentElement.clientWidth)+"px").css("height",b(document).height()+"px")}}b(window).resize(function(){j()});b(window).scroll(function(){j()});j()};f.render=function(){if(f.options.container===null||f.getMain()||f.disposed){return null}var i=b(c());d(i);i.css("background-color",f.options.modalColor).css("opacity",f.options.modalOpacity).css("z-index",f.options.modalZIndex).css("top",0).css("left",0).css("display","block");i.appendTo(b(f.options.container));g()}};a.inherits(a.Modal,a.BaseUI)})(jQuery,UI);