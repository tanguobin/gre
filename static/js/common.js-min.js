(function(a){var b=a.jQuery;if(typeof c=="undefined"||!c){var c={dataStorage:function(d,e){c.dataStorage[d]=e},isNumber:function(d){return"[object Number]"==Object.prototype.toString.call(parseInt(d))&&isFinite(parseInt(d))},getDialog:function(e){var d=new UI.Dialog({titleText:e.titleText?e.titleText:"提示",contentText:e.contentText,width:e.width?e.width:200,height:e.height?e.height:100,modalColor:e.modalColor?e.modalColor:"#fff",closeButton:e.closeButton?e.closeButton:true,modal:e.modal?e.modal:true});d.render();d.open();return d},domStorage:[],dialog:null,getRandom:function(h,g){var e=[],f,d=function(j,i){var k=c.getRandom(j);return(b.inArray(k,i)<0)?k:d(j,i)};if(g){for(f=0;f<g;f++){e[f]=d(h,e)}return e}else{return Math.floor(Math.random()*h)}},encodeHTML:function(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},encodeJSON:function(d){return String(d).replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/"/g,'\\"')},getByteLength:function(d){return String(d).replace(/[^\x00-\xff]/g,"ci").length},trim:function(f){var f=f.replace(/^\s\s*/,""),d=/\s/,e=f.length;while(d.test(f.charAt(--e))){}return f.slice(0,e+1)},isOldIE:!+"\v1",load:function(k,l){var m=document.getElementsByTagName("head")[0],f=k.split(","),n=function(o){var s=b("head script[src]");for(var q=0,r=s.length;q<r;q++){if(b(s[q]).attr("src")===o){return true}}return false},g=function(o,q){if(n(o)){setTimeout(q,0);return}var i=document.createElement("script");i.async=true;i.src=o;i.type="text/javascript";m.appendChild(i);i.onloadDone=false;i.onload=function(){i.onloadDone=true;if(q){setTimeout(q,500)}};if(c.isOldIE){i.onreadystatechange=function(){if(("loaded"===i.readyState||"complete"===i.readyState)&&!i.onloadDone){i.onloadDone=true;if(q){setTimeout(q,500)}}}}},j=0,d=f.length,h,e;for(;j<d;j++){h=(j==d-1&&l)?l:null;e=c.trim(f[j]);g(e,h)}},add:function(h,j){if(c[h]){alert("GRE."+h+" 已被破处, 换个名字吧");return}var f=h.split(","),g=f.length;for(p in f){var d=c.trim(f[p]);try{c[d]=(g==1)?j:null}catch(i){}}if(j&&typeof(j)=="function"){try{setTimeout(j,0)}catch(i){}}},get:function(d,f,h,e){var g;if(jQuery.isFunction(f)){e=e||h;h=f;f=g}jQuery.get(d,f,function(k){var j=this,i=jQuery.parseJSON(k);if(i.status.code!=0){return}h.call(j,k)},e)},post:function(d,f,h,e){var g;if(jQuery.isFunction(f)){e=e||h;h=f;f=g}jQuery.post(d,f,function(k){var j=this,i=jQuery.parseJSON(k);if(i.status.code!=0){return}if(h){h.call(j,k)}},e)},stringFormat:function(f,d){f=String(f);var e=Array.prototype.slice.call(arguments,1),g=Object.prototype.toString;if(e.length){e=e.length==1?(d!==null&&(/\[object Array\]|\[object Object\]/.test(g.call(d)))?d:e):e;return f.replace(/#\{(.+?)\}/g,function(h,j){var i=e[j];if("[object Function]"==g.call(i)){i=i(j)}return("undefined"==typeof i?"":i)})}return f},dynCreateForm:function(e,h,g,i){var f=document.createElement("form");f.method=e;f.action=h;if(arguments[3]){f.target=i}for(option in g){var d=document.createElement("input");d.type="hidden";d.name=option;d.value=g[option];f.appendChild(d)}document.body.appendChild(f);return f}}}a.GRE=c})(window,document);GRE.add("login",{defconf:{trigger:null,onlogin:function(){location.reload(true)}},login:function(b){var a=this;a.options=$.extend({},a.defconf,b);GRE.load("http://gretest.sinaapp.com/static/js/depends/UI_Dialog.js",function(){GRE.get("/ajax/account/isLogin",{},function(f){f=jQuery.parseJSON(f);if(f.content.isLogin===true){a.options.onlogin()}else{if(GRE.dialog){GRE.dialog.open()}else{GRE.dialog=GRE.getDialog({titleText:"登录",contentText:['<div class="login cf" id="J_dialog-login">','<div class="bd">','<ul class="registe-box">','<li><span class="red tip J_tip"></span></li>','<li><label for="J_user-name">账号：</label><input type="text" class="text J_user-name" placeholder="注册时使用的邮箱/昵称" /></li>','<li><label for="J_password">密码：</label><input type="password" class="text J_password" /></li>','<li class="mem_pass"><input type="checkbox" name="mem_pass" checked="checked" id="J_mem-pass" />记住我的登录状态</span></li>','<li class="last"><a class="login-btn J_login-btn" href="#">登录</a><!--<a href="/account/reset" class="reset">忘记密码？</a>--><a href="/account/apply" class="reset" target="_blank">注册</a></li>',"</ul>","</div>","</div>"].join(""),width:450,height:280});var e="#J_dialog-login",c=".J_tip",h=".J_login-btn",g=".J_user-name",d=".J_password";$.each($(e+" input.text"),function(i,j){$(j).hover(function(k){$(this).addClass("active")},function(k){$(this).removeClass("active")}).blur(function(k){var l=this,m=$(l).val();if(m===""){if($(l).hasClass("J_user-name")){$(e+" "+c).html("请输入账号")}else{$(e+" "+c).html("请输入密码")}}})});$(e+" "+h).click(function(i){var k=$(e+" "+g).val(),j=$(e+" "+d).val(),l=("checked"===$("#J_mem-pass").attr("checked"));GRE.post("/ajax/account/login",{username:k,password:j,pass:l},function(m){m=jQuery.parseJSON(m);if(m.content===true){a.options.onlogin()}else{$(e+" "+c).html("账号或密码错误")}});return false})}}})})},init:function(b){var a=this;a.options=$.extend({},a.defconf,b);a.options.trigger.click(function(){a.login(b);return false})}});GRE.add("favorite",{name:"爱GRE模考网(igrer.com)",init:function(){var a=this,c=a.name,d=window.location,b=[d.protocol,"//",d.host,"/?fr=fav"].join("");$("#J_add-fav").click(function(){try{if(window.sidebar){window.sidebar.addPanel(c,b,"")}else{if(window.external){window.external.AddFavorite(b,c)}else{alert("您的浏览器不支持自动添加! 请尝试手动 Ctrl+D")}}}catch(f){alert("您的浏览器不支持自动添加! 请尝试手动 Ctrl+D")}return false})}});(function(a){window.UI=window.UI||{};a.extend(UI,{BaseUI:function(){var e=this,d="DK-UI-",b=e.options.classPrefix?e.options.classPrefix:e.options.uiType.toLowerCase(),c=0;UI.guid=++UI.guid||0;c=UI.guid;e.disposed=false;e.isShowed=false;e._getId=function(f){return d+e.options.uiType+"__"+c+(f?"-"+f:"")};e._getClass=function(f){return b+(f?"-"+f:"")};e.isShown=function(){return e.isShowed};e.getMain=function(){var f=a("#"+e._getId()+"-main");if(f.length>0){return f}return null};e.getHeader=function(){var f=a("#"+e._getId()+"-header");if(f.length>0){return f}return null};e.getContent=function(){var f=a("#"+e._getId()+"-content");if(f.length>0){return f}return null};e.getFooter=function(){var f=a("#"+e._getId()+"-footer");if(f.length>0){return f}return null};e.hide=function(){a(e.getMain()).hide();e.isShowed=false};e.show=function(){a(e.getMain()).show();e.isShowed=true};e.dispose=function(){e.disposed=true;e.getMain().remove();e=null}},inherits:function(g,e){var d,f,b=g.prototype,c=new Function();c.prototype=e.prototype;f=g.prototype=new c();for(d in b){f[d]=b[d]}g.prototype.constructor=g;g.superClass=e.prototype;g.extend=function(j){for(var h in j){f[h]=j[h]}return g};return g},stringFormat:function(d,b){d=String(d);var c=Array.prototype.slice.call(arguments,1),e=Object.prototype.toString;if(c.length){c=c.length==1?(b!==null&&(/\[object Array\]|\[object Object\]/.test(e.call(b)))?b:c):c;return d.replace(/#\{(.+?)\}/g,function(f,h){var g=c[h];if("[object Function]"==e.call(g)){g=g(h)}return("undefined"==typeof g?"":g)})}return d}})})(jQuery);